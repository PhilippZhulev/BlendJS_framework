function Flu(){this.version="0.0.8";const e=this;let n,t=[],l=[];function u(e,n){let t=[];for(let i=0;i<e.length;i++){function l(l){let i=e[l].split(">")[0]+">",u=e[l].split(">")[1],c=i.match(/[+*?$^(\(\).#\[\]>)]/g),r=i.split(c[0])[0],o=0,f=[],a=0,p=0,s=0,m="flu_"+String(Math.floor(1e3*Math.random())).substring(0,5)+"_elm"+String(Math.floor(2e3*Math.random())).substring(0,5),d=0;for(let e=0;e<c.length;e++){function h(e){return i.split(c[e])[1].split(c[e+1])[0]}switch(c[e]){case".":d=e+1,f.push(i.split(c[e])[d].split(c[e+1])[0]);break;case"#":o=h(e);break;case"[":p=h(e);break;case"(":a=h(e)}}void 0!==u&&(s=u);let g=document.createElement(r.replace(/^\s+/,""));if(f.length>0&&f.forEach(function(e){g.classList.add(e)}),0!==o&&(g.id=o),0!==p){(p.split(", ")||p).forEach(function(e){let n=e.split("=");g.setAttribute(n[0],n[1])})}0!==s&&(g.innerHTML=s);let E=e[l].split(c[0])[0].match(/ /g);null===E&&(E=0),t.push({fluName:a,id:o,flu_id:m,childElement:[],spacesLength:E.length||0,element:g,classes:f,sim:c,fluSupply:e[l]}),void 0!==t[l-1]&&void 0!==t[l-1].spacesLength&&(t[l].spacesLength>t[l-1].spacesLength&&(t[l-1].childElement.push(t[l]),parentMem=t[l-1]),t[l].spacesLength===t[l-1].spacesLength&&0!==t[l].spacesLength&&parentMem.childElement.push(t[l])),t.forEach(function(t,i){0===t.spacesLength&&e.length-1===l&&n.push(t)})}"string"==typeof e[i]?l(i):console.error("Parsing error: Error parsing line")}}function c(e,n){for(let l=0;l<e.length;l++){function t(e){e.childElement.forEach(function(n,l){e.element.append(n.element),0!==n.childElement&&t(n)})}0!==e[l].childElement.length&&t(e[l]),0===e[l].spacesLength&&n(l)}}function r(e,n,t){let l=0;return(e.childElement||e).forEach(function(e,i){e.fluName!==n&&null!==n||(void 0!==t&&t(e),l=e),0!==e.childElement&&r(e,n,t)}),l}this.updateEvent=new Event("flu.update"),this.update=function(){return l=[],document.dispatchEvent(e.updateEvent)},this.class=function(e){return new e},this.component=function(){let e=this,l=[],i={};return void 0!==e.model&&e.model.call(i),void 0!==e.view&&u(e.view.call(i,i),l),{render:function(r){return n=document.querySelector(r),c(l,function(e){n.append(l[e].element)}),void 0!==e.supply&&u(e.supply.call(i),t),t=t.concat(l),void 0!==e.controller&&e.controller.call(t,i),void 0!==e.onEvent&&e.event.call(t),e.fluSupply=t,t},inheritance:function(){return t},clear:function(){return t=[],e.fluSupply=[],e.fluSupply}}},this.reg=function(t){function l(e,n,l){let i,o,f,a=null,p=[];return r(t,n,function(e){a=e}),r(t,l,function(e){p.push(e)}),c(p,function(n){let t=p[n].element;o=p[n].fluSupply,f=p[n].childElement,i=t.cloneNode(!0),"append"===e?a.element.append(i):"create"===e&&(a.element.innerHTML=i)}),{supplement:function(e){let l=[],c=[o];for(let e=0;e<f.length;e++)c.push(f[e].fluSupply);return u(c,l),l[0].fluName=e,l[0].element=i,i.childNodes.forEach(function(e,n){void 0!==l[0].childElement[n]&&(l[0].childElement[n].element=e)}),r(t,n,function(e){e.childElement.push(l[0])}),{deliver:function(){l[0].element.setAttribute("data-flu-name",l[0].fluName)},renameChild:function(e,n){r(l[0].childElement,e,function(t){t.fluName=n,t.fluSupply=t.fluSupply.replace("("+e+")","("+n+")")})},innerBefore:function(e){l[0].element.prepend(e)},innerAfter:function(e){l[0].element.append(e)},child:function(e){return{inner:function(n){r(l[0].childElement,e,function(e){e.element.innerHTML=n})},innerAfter:function(n){r(l[0].childElement,e,function(e){e.element.append(n)})},innerBefore:function(n){r(l[0].childElement,e,function(e){e.element.prepend(n)})}}},attr:function(e,n){l[0].element.setAttribute(e,n)},addClass:function(e){l[0].element.classList.add(e)},removeClass:function(e){l[0].element.classList.remove(e)},inner:function(e){l[0].element.innerHTML=e}}}}}function o(n,l,i){let u=null;document.addEventListener("flu.update",function(){if(void 0!==l.before&&(u=l.before.call(e.reg(t))),"string"==typeof n)r(t,n,function(e){return i(e,u)});else if(Array.isArray(n))for(let e=0;e<n.length;e++)r(t,n[e],function(n){return i(n,e)})}),e.update()}function f(n,l){n.run.call(e.reg(t),l),!0===n.update&&e.update()}return{it:function(e){let n=null;return r(t,e,function(e){n=e}),{childIndex:function(e){let t;for(let l=0;l<n.childElement.length;l++)n.childElement[l].fluName===e&&(t=l);return i},childLength:function(){return n.childElement.length},attr:{set:function(e,t){n.element.setAttribute(e,t)},get:function(e){return n.element.getAttribute(e)}},inner:function(e){n.element.innerHTML=e},innerAfter:function(e){n.element.append(e)},innerBefore:function(e){n.element.prepend(e)},redraw:function(e){let t=[];u(e,t),c(t,function(e){n.element.replaceWith(t[e].element)})}}},refactor:function(e,n){let l=null,i=[];r(t,e,function(e){l=e}),r(t,n,function(e){i=e}),l.element.replaceWith(i.element)},append:function(e,n){return l("append",e,n)},create:function(e,n){return l("create",e,n)},rename:function(e,n){r(t,e,function(e){e.fluName=n})},onEvent:function(e){return{click:function(n){return o(e,n,function(e,t){e.element.onclick=function(){f(n,t)}})},keyup:function(n){return o(e,n,function(e,t){e.element.onkeyup=function(){f(n,t)}})},change:function(n){return o(e,n,function(e,t){e.element.onchange=function(){f(n,t)}})},keydown:function(n){return o(e,n,function(e,t){e.element.onkeydown=function(){f(n,t)}})}}},remove:function(e){let n=null;r(t,e,function(e){n=e}),n.element.remove()},value:function(e){let n=null;return r(t,e,function(e){n=e}),{get:function(){return n.element.value},set:function(e){return n.element.value=e}}},build:function(e){let l=[],i=n;return u(e,l),{to:function(e){r(t,e,function(e){i=e})},inner:function(){c(l,function(e){n.innerHTML=l[e].element})},innerBefore:function(){c(l,function(e){n.prepend(l[e].element)})},innerAfter:function(){c(l,function(e){n.append(l[e].element)})}}},fluSupply:t}}}const flu=new Flu;