function Flu(){this.version="0.0.8";const e=this;let n=[],t=[];function l(e,n){let t=[];for(let u=0;u<e.length;u++){function l(l){let u=e[l].split(">")[0]+">",i=e[l].split(">")[1],c=u.match(/[+*?$^(\(\).#\[\]>)]/g),r=u.split(c[0])[0],o=0,f=[],s=0,a=0,p=0,d="flu_"+String(Math.floor(1e3*Math.random())).substring(0,5)+"_elm"+String(Math.floor(2e3*Math.random())).substring(0,5),h=0;for(let e=0;e<c.length;e++){function m(e){return u.split(c[e])[1].split(c[e+1])[0]}switch(c[e]){case".":h=e+1,f.push(u.split(c[e])[h].split(c[e+1])[0]);break;case"#":o=m(e);break;case"[":a=m(e);break;case"(":s=m(e)}}void 0!==i&&(p=i);let g=document.createElement(r.replace(/^\s+/,""));if(f.length>0&&f.forEach(function(e){g.classList.add(e)}),0!==o&&(g.id=o),0!==a){(a.split(",")||a).forEach(function(e){let n=e.split("=");g.setAttribute(n[0],n[1])})}0!==p&&(g.innerHTML=p);let E=e[l].split(c[0])[0].match(/ /g);null===E&&(E=0),t.push({fluName:s,id:o,flu_id:d,childElement:[],spacesLength:E.length||0,element:g,classes:f,sim:c,fluSupply:e[l]}),void 0!==t[l-1]&&void 0!==t[l-1].spacesLength&&(t[l].spacesLength>t[l-1].spacesLength&&(t[l-1].childElement.push(t[l]),parentMem=t[l-1]),t[l].spacesLength===t[l-1].spacesLength&&parentMem.childElement.push(t[l])),t.forEach(function(t,u){0===t.spacesLength&&e.length-1===l&&n.push(t)})}"string"==typeof e[u]?l(u):console.error("Parsing error: Error parsing line")}}function u(e,n){for(let l=0;l<e.length;l++){function t(e){e.childElement.forEach(function(n,l){e.element.append(n.element),0!==n.childElement&&t(n)})}0!==e[l].childElement.length&&t(e[l]),0===e[l].spacesLength&&n(l)}}function c(e,n,t){let l=0;return(e.childElement||e).forEach(function(e,u){e.fluName!==n&&null!==n||(void 0!==t&&t(e),l=e),0!==e.childElement&&c(e,n,t)}),l}this.updateEvent=new Event("flu.update"),this.update=function(){return t=[],document.dispatchEvent(e.updateEvent)},this.class=function(e){return new e},this.component=function(){let e=this,t=[];return void 0!==this.view&&l(this.view(),t),{render:function(i){let c=document.querySelector(i);return u(t,function(e){c.append(t[e].element)}),void 0!==e.supply&&l(e.supply(),n),n=n.concat(t),void 0!==e.controller&&e.controller.call(n,n),void 0!==e.onEvent&&e.event.call(n),e.fluSupply=n,n},inheritance:function(){return n},clear:function(){return n=[],e.fluSupply=[],e.fluSupply}}},this.reg=function(n){function t(e,t,i){let r,o,f,s=null,a=[];return c(n,t,function(e){s=e}),c(n,i,function(e){a.push(e)}),u(a,function(n){let t=a[n].element;o=a[n].fluSupply,f=a[n].childElement,r=t.cloneNode(!0),"append"===e?s.element.append(r):"create"===e&&(s.element.innerHTML=r)}),{supplement:function(e){let u=[],i=[o];for(let e=0;e<f.length;e++)i.push(f[e].fluSupply);return l(i,u),u[0].fluName=e,u[0].element=r,r.childNodes.forEach(function(e,n){u[0].childElement[n].element=e}),c(n,t,function(e){e.childElement.push(u[0])}),{deliver:function(){u[0].element.setAttribute("data-flu-name",u[0].fluName)},renameChild:function(e,n){c(u[0].childElement,e,function(t){t.fluName=n,t.fluSupply=t.fluSupply.replace("("+e+")","("+n+")")})},innerBefore:function(e){u[0].element.prepend(e)},innerAfter:function(e){u[0].element.append(e)},child:function(e){return{inner:function(n){c(u[0].childElement,e,function(e){e.element.innerHTML=n})},innerAfter:function(n){c(u[0].childElement,e,function(e){e.element.append(n)})},innerBefore:function(n){c(u[0].childElement,e,function(e){e.element.prepend(n)})}}},attr:function(e,n){u[0].element.setAttribute(e,n)},addClass:function(e){u[0].element.classList.add(e)},removeClass:function(e){u[0].element.classList.remove(e)},inner:function(e){u[0].element.innerHTML=e}}}}}function r(t,l){let u=null;void 0!==t.before&&(u=t.before.call(e.reg(n))),document.addEventListener("flu.update",function(){c(n,t.target,function(e){return l(e,u)})}),e.update()}function o(t,l){t.run.call(e.reg(n),l),!0===t.update&&e.update()}return{target:function(e){let t=null;return c(n,e,function(e){t=e}),{childIndex:function(e){let n;for(let l=0;l<t.childElement.length;l++)t.childElement[l].fluName===e&&(n=l);return i},childLength:function(){return t.childElement.length}}},refactor:function(e,t){let l=null,u=[];c(n,e,function(e){l=e}),c(n,t,function(e){u=e}),l.element.replaceWith(u.element)},append:function(e,n){return t("append",e,n)},create:function(e,n){return t("create",e,n)},rename:function(e,t){c(n,e,function(e){e.fluName=t})},onEvent:{click:function(e){return r(e,function(n,t){n.element.onclick=function(){o(e,t)}})},keyup:function(e){return r(e,function(n,t){n.element.onkeyup=function(){o(e,t)}})}},levelUp:function(t){document.addEventListener("flu.update",function(){c(n,null,function(n){t.call(e.item(n),n)})})},remove:function(e){let t=null;c(n,e,function(e){t=e}),t.element.remove()},value:function(e){let t=null;return c(n,e,function(e){t=e}),{get:function(){return t.element.value},set:function(e){return t.element.value=e}}},fluSupply:n}},this.item=function(e){return{filterByClass:function(n,t){if(0!==e.classes)for(let l=0;l<e.classes.length;l++)e.classes[l]===n&&t({element:e,getAttr:function(n){return e.element.getAttribute(n)}})}}}}const flu=new Flu;