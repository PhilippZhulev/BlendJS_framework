function Blend(){this.version="0.0.8";const e=this;let n,t=[],l=[];function c(e,n){let t=[];for(let i=0;i<e.length;i++){function l(l){let i=e[l].split(">")[0]+">",c=e[l].split(">")[1],r=i.match(/[+*?$^(\(\).#\[\]>)]/g),o=i.split(r[0])[0],u=0,d=[],f=0,a=0,s=0,p="Blend_"+String(Math.floor(1e3*Math.random())).substring(0,5)+"_elm"+String(Math.floor(2e3*Math.random())).substring(0,5),m=0;for(let e=0;e<r.length;e++){function h(e){return i.split(r[e])[1].split(r[e+1])[0]}switch(r[e]){case".":m=e+1,d.push(i.split(r[e])[m].split(r[e+1])[0]);break;case"#":u=h(e);break;case"[":a=h(e);break;case"(":f=h(e)}}void 0!==c&&(s=c);let g=document.createElement(o.replace(/^\s+/,""));if(d.length>0&&d.forEach(function(e){g.classList.add(e)}),0!==u&&(g.id=u),0!==a){(a.split(", ")||a).forEach(function(e){let n=e.split("=");g.setAttribute(n[0],n[1])})}0!==s&&(g.innerHTML=s);let b=e[l].split(r[0])[0].match(/ /g);null===b&&(b=0);let E=1;n.forEach(function(e,n){e.blendName===f&&(f=f.replace("_"+(E-1),"")+"_"+E,E++,console.log(e.blendName))}),t.push({blendName:f,id:u,blend_id:p,childElement:[],spacesLength:b.length||0,element:g,classes:d,sim:r,blendSupply:e[l]}),void 0!==t[l-1]&&void 0!==t[l-1].spacesLength&&(t[l].spacesLength>t[l-1].spacesLength&&(t[l-1].childElement.push(t[l]),parentMem=t[l-1]),t[l].spacesLength===t[l-1].spacesLength&&0!==t[l].spacesLength&&parentMem.childElement.push(t[l])),t.forEach(function(t,i){0===t.spacesLength&&e.length-1===l&&n.push(t)})}"string"==typeof e[i]?l(i):console.error("Parsing error: Error parsing line")}}function r(e,n){for(let l=0;l<e.length;l++){function t(e){e.childElement.forEach(function(n,l){e.element.append(n.element),0!==n.childElement&&t(n)})}0!==e[l].childElement.length&&t(e[l]),0===e[l].spacesLength&&n(l)}}function o(e,n,t,l){let i,c=0;return(e.childElement||e).forEach(function(e,r){if(void 0===l?i=e.blendName:"id"===l?i=e.id:"blendId"===l&&(i=e.blend_id),"class"!==l)i!==n&&null!==n||(void 0!==t&&t(e),c=e);else for(let l=0;l<e.classes.length;l++)e.classes[l]===n&&(void 0!==t&&t(e),c=e);0!==e.childElement&&o(e,n,t)}),c}this.updateEvent=new Event("Blend.update"),this.update=function(){return l=[],document.dispatchEvent(e.updateEvent)},this.class=function(e){return new e},this.component=function(){let e=this,l=[],i={};return void 0!==e.model&&e.model.call(i),void 0!==e.view&&c(e.view.call(i,i),l),{render:function(o){return n=document.querySelector(o),r(l,function(e){n.append(l[e].element)}),void 0!==e.supply&&c(e.supply.call(i),t),t=t.concat(l),void 0!==e.controller&&e.controller.call(t,i),void 0!==e.onEvent&&e.event.call(t),e.BlendSupply=t,t},inheritance:function(){return t},clear:function(){return t=[],e.BlendSupply=[],e.BlendSupply}}},this.reg=function(n){function t(e,t,l){let i,u,d,f=[];return o(n,l,function(e){f.push(e)}),r(f,function(n){let l=f[n].element;u=f[n].blendSupply,d=f[n].childElement,i=l.cloneNode(!0),"append"===e?t.element.append(i):"prepend"===e?t.element.prepend(i):"create"===e&&(t.element.innerHTML=i)}),{supplement:function(e){let l=[],r=[u];for(let e=0;e<d.length;e++)r.push(d[e].blendSupply);return c(r,l),l[0].blendName=e,l[0].element=i,i.childNodes.forEach(function(e,n){void 0!==l[0].childElement[n]&&(l[0].childElement[n].element=e)}),o(n,t.blendName,function(n){let t=0;for(let i=0;i<n.childElement.length;i++)-1!==n.childElement[i].blendName.indexOf(e)&&(l[0].blendName=e+"_"+t++);n.childElement.push(l[0])}),{deliver:function(){l[0].element.setAttribute("data-blend-name",l[0].blendName)},renameChild:function(e,n){o(l[0].childElement,e,function(t){t.blendName=n,t.blendSupply=t.blendSupply.replace("("+e+")","("+n+")")})},innerBefore:function(e){l[0].element.prepend(e)},innerAfter:function(e){l[0].element.append(e)},child:function(e){return{inner:function(n){o(l[0].childElement,e,function(e){e.element.innerHTML=n})},innerAfter:function(n){o(l[0].childElement,e,function(e){e.element.append(n)})},innerBefore:function(n){o(l[0].childElement,e,function(e){e.element.prepend(n)})}}},attr:function(e,n){l[0].element.setAttribute(e,n)},addClass:function(e){l[0].element.classList.add(e)},removeClass:function(e){l[0].element.classList.remove(e)},inner:function(e){l[0].element.innerHTML=e}}}}}function l(t,l,i){let c=null;document.addEventListener("Blend.update",function(){if(void 0!==l.before&&(c=l.before.call(e.reg(n))),"string"==typeof t)o(n,t,function(e){return i(e,{before:c,index:0,target:t})});else if(Array.isArray(t))for(let e=0;e<t.length;e++)o(n,t[e],function(n){return i(n,{before:c,index:e,target:t[e]})})}),e.update()}function u(t,l){t.run.call(e.reg(n),l),!0===t.update&&e.update()}function d(e,t){let l=void 0;return o(n,e,function(e){l=e},t),l}return{it:function(e){let l=null;return o(n,e,function(e){l=e}),{rename:function(e){o(n,l,function(n){n.blendName=e,n.blendSupply=n.blendSupply.replace("("+l+")","("+e+")")})},value:{get:function(){return l.element.value},set:function(e){return l.element.value=e}},remove:function(){l.element.remove()},create:function(e){return t("create",l,e)},append:function(e){return t("append",l,e)},prepend:function(e){return t("prepend",l,e)},refactor:function(e){let t=[];o(n,e,function(e){t=e}),l.element.replaceWith(t.element)},childIndex:function(e){let n;for(let t=0;t<l.childElement.length;t++)l.childElement[t].blendName===e&&(n=t);return i},childLength:function(){return l.childElement.length},attr:{set:function(e,n){l.element.setAttribute(e,n)},get:function(e){return l.element.getAttribute(e)}},inner:function(e){l.element.innerHTML=e},innerAfter:function(e){l.element.append(e)},innerBefore:function(e){l.element.prepend(e)},redraw:function(e){let n=[];c(e,n),r(n,function(e){l.element.replaceWith(n[e].element)})},item:l,element:l.element}},each:function(e){!function n(t){for(let l=0;l<t.length;l++)e(t[l],l),0!==t[l].childElement&&n(t[l].childElement)}(n)},searchId:function(e){return d(e,"id")},searchClass:function(e){return d(e,"class")},searchBlendId:function(e){return d(e,"blendId")},build:function(e){c(e,n)},onEvent:function(e){return{click:function(n){return l(e,n,function(e,t){e.element.onclick=function(){u(n,t)}})},keyup:function(n){return l(e,n,function(e,t){e.element.onkeyup=function(){u(n,t)}})},change:function(n){return l(e,n,function(e,t){e.element.onchange=function(){u(n,t)}})},keydown:function(n){return l(e,n,function(e,t){e.element.onkeydown=function(){u(n,t)}})}}},blendSupply:n}}}const blend=new Blend;