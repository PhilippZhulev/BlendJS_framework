function Blend(){!function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}(),this.version="0.1.6";const e=this;let n,t=[],l={},r=[];function o(e,n){let t=[];for(let i=0;i<e.length;i++){function l(l){let i=e[l].split(">")[0]+">",r=e[l].split(">")[1],o=i.match(/[+*?$^(\(\).#\[\]>)]/g),c=i.split(o[0])[0],u=0,d=[],a=0,f=0,p=0,s="blend_"+String(Math.floor(1e3*Math.random())).substring(0,5)+"_elm"+String(Math.floor(2300*Math.random())).substring(0,5),m=0;for(let e=0;e<o.length;e++){function h(e){return i.split(o[e])[1].split(o[e+1])[0]}switch(o[e]){case".":m=e+1,d.push(i.split(o[e])[m].split(o[e+1])[0]);break;case"#":u=h(e);break;case"[":f=h(e);break;case"(":a=h(e)}}void 0!==r&&(p=r);let b=document.createElement(c.replace(/^\s+/,""));if(d.length>0&&d.forEach(function(e){b.classList.add(e)}),0!==u&&(b.id=u),0!==f){(f.split(", ")||f).forEach(function(e){let n=e.split("=");b.setAttribute(n[0],n[1])})}0!==p&&(b.innerHTML=p);let g=e[l].split(o[0])[0].match(/ /g);null===g&&(g=0);let v=1;if(n.forEach(function(e,n){e.blendName===a&&0!==a&&(a=a.replace("_"+(v-1),"")+"_"+v,v++)}),t.push({blendName:a,id:u,blend_id:s,childElement:[],spacesLength:g.length||0,element:b,classes:d,sim:o,blendSupply:e[l]}),void 0!==t[l-1]&&void 0!==t[l-1].spacesLength){t[l].spacesLength>t[l-1].spacesLength&&t[l-1].childElement.push(t[l]);for(let e=0;e<t.length;e++)t[l].spacesLength===t[e].spacesLength&&t[l].blend_id!==t[e].blend_id&&0!==t[l].spacesLength&&t[e-1].childElement.push(t[l])}t.forEach(function(t,i){0===t.spacesLength&&e.length-1===l&&n.push(t)})}"string"==typeof e[i]?l(i):console.error("Parsing error: Error parsing line")}}function c(e,n){!function e(t,l){let i,r=0,o=t.length;for(;r<o;r++)i=t[r],void 0!==l&&l.append(i.element),0!==i.childElement.length&&e(i.childElement,i.element),0===t[r].spacesLength&&n(r)}(e)}function u(e,n,t,l){let i,r=0;return(e.childElement||e).forEach(function(e,o){if(void 0===l?i=e.blendName:"id"===l?i=e.id:"blendId"===l&&(i=e.blend_id),"class"!==l)i!==n&&null!==n||(void 0!==t&&t(e),r=e);else for(let l=0;l<e.classes.length;l++)e.classes[l]===n&&(void 0!==t&&t(e),r=e);0!==e.childElement&&u(e,n,t)}),r}this.updateEvent=new Event("Blend.update"),this.update=function(){return r=[],document.dispatchEvent(e.updateEvent)},this.class=function(e){return new e},this.component=function(){let e=this,i=[];return void 0!==e.model&&e.model.call(l),void 0!==e.view&&o(e.view.call(l,l),i),{render:function(r){return n=document.querySelector(r),c(i,function(e){n.append(i[e].element)}),void 0!==e.supply&&o(e.supply.call(l),t),t=t.concat(i),void 0!==e.controller&&e.controller.call(t,l),void 0!==e.onEvent&&e.event.call(t),e.BlendSupply=t,t},inheritance:function(){return t},clear:function(){return t=[],e.BlendSupply=[],e.BlendSupply}}},this.reg=function(n){function t(e,t,l){let i,r,d,a=[];return u(n,l,function(e){a.push(e)}),c(a,function(n){let l=a[n].element;r=a[n].blendSupply,d=a[n].childElement,i=l.cloneNode(!0),"append"===e?t.element.append(i):"prepend"===e?t.element.prepend(i):"create"===e&&(t.element.innerHTML=i)}),{supplement:function(e){let l=[],c=[r];for(let e=0;e<d.length;e++)c.push(d[e].blendSupply);return o(c,l),l[0].blendName=e,l[0].element=i,i.childNodes.forEach(function(e,n){void 0!==l[0].childElement[n]&&(l[0].childElement[n].element=e)}),u(n,t.blendName,function(n){let t=0;for(let i=0;i<n.childElement.length;i++)-1!==n.childElement[i].blendName.indexOf(e)&&(l[0].blendName=e+"_"+t++);n.childElement.push(l[0])}),{deliver:function(){l[0].element.setAttribute("data-blend-name",l[0].blendName)},renameChild:function(e,n){u(l[0].childElement,e,function(t){t.blendName=n,t.blendSupply=t.blendSupply.replace("("+e+")","("+n+")")})},innerBefore:function(e){l[0].element.prepend(e)},innerAfter:function(e){l[0].element.append(e)},child:function(e){return{inner:function(n){u(l[0].childElement,e,function(e){e.element.innerHTML=n})},innerAfter:function(n){u(l[0].childElement,e,function(e){e.element.append(n)})},innerBefore:function(n){u(l[0].childElement,e,function(e){e.element.prepend(n)})}}},attr:{set:function(e,n){l[0].element.setAttribute(e,n)},get:function(e){return l[0].element.getAttribute(e)}},addClass:function(e){l[0].element.classList.add(e)},removeClass:function(e){l[0].element.classList.remove(e)},inner:function(e){l[0].element.innerHTML=e}}}}}function l(t,l,i){let r=null;document.addEventListener("Blend.update",function(){if(void 0!==l.before&&(r=l.before.call(e.reg(n))),"string"==typeof t)u(n,t,function(e){return i(e,{before:r,index:0,target:t})});else if(Array.isArray(t))for(let e=0;e<t.length;e++)u(n,t[e],function(n){return i(n,{before:r,index:e,target:t[e]})})}),e.update()}function r(t,l){t.run.call(e.reg(n),l),!0===t.update&&e.update()}function d(e,t){let l=void 0;return u(n,e,function(e){l=e},t),l}return{it:function(e){let l=null;if(u(n,e,function(e){l=e}),Array.isArray(e)){l=[];for(let n=0;n<e.length;n++)l.push(item)}return{draw:function(e){void 0===e.data&&(e.data=[0]);for(let n=0;n<e.data.length;n++){let t=[];void 0!==e.before&&e.before(e.data[n],n),o("function"==typeof e.render?e.render(e.data[n],n):e.render,t),void 0!==e.after&&e.after(e.data[n],n),c(t,function(n){switch(e.type){case"append":l.element.append(t[n].element);break;case"prepend":l.element.prepend(t[n].element);break;case"rewrite":l.element.innerHTML=t[n].element}})}},rename:function(e){u(n,l,function(n){n.blendName=e,n.blendSupply=n.blendSupply.replace("("+l+")","("+e+")")})},value:{get:function(){return l.element.value},set:function(e){return l.element.value=e}},remove:function(){l.element.remove()},create:function(e){return t("create",l,e)},append:function(e){return t("append",l,e)},prepend:function(e){return t("prepend",l,e)},refactor:function(e){let t=[];u(n,e,function(e){t=e}),l.element.replaceWith(t.element)},childIndex:function(e){let n;for(let t=0;t<l.childElement.length;t++)l.childElement[t].blendName===e&&(n=t);return i},childLength:function(){return l.childElement.length},attr:{set:function(e,n){l.element.setAttribute(e,n)},get:function(e){return l.element.getAttribute(e)}},inner:function(e){l.element.innerHTML=e},innerAfter:function(e){l.element.append(e)},innerBefore:function(e){l.element.prepend(e)},redraw:function(e){let n=[];o(e,n),c(n,function(e){l.element.replaceWith(n[e].element)})},item:l,el:l.element}},each:function(e){!function n(t){for(let l=0;l<t.length;l++)e(t[l],l),0!==t[l].childElement&&n(t[l].childElement)}(n)},searchId:function(e){return d(e,"id")},searchClass:function(e){return d(e,"class")},searchBlendId:function(e){return d(e,"blendId")},build:function(e){void 0===e.data&&(e.data=[0]);for(let t=0;t<e.data.length;t++){void 0!==e.before&&e.before(e.data[t],t),o("function"==typeof e.render?e.render(e.data[t],t):e.render,n),void 0!==e.after&&e.after(e.data[t],t)}},onEvent:function(e){return{click:function(n){return l(e,n,function(e,t){e.element.onclick=function(){r(n,t)}})},keyup:function(n){return l(e,n,function(e,t){e.element.onkeyup=function(){r(n,t)}})},change:function(n){return l(e,n,function(e,t){e.element.onchange=function(){r(n,t)}})},keydown:function(n){return l(e,n,function(e,t){e.element.onkeydown=function(){r(n,t)}})},mouseOver:function(n){return l(e,n,function(e,t){e.element.onmouseover=function(){r(n,t)}})},onmouseOut:function(n){return l(e,n,function(e,t){e.element.onmouseout=function(){r(n,t)}})},now:function(n){return l(e,n,function(e,t){r(n,t)})}}},blendSupply:n}}}const blend=new Blend;