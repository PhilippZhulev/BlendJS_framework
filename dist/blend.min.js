function Blend(){!function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}(),this.version="0.1.9";const e=this;let n,t=[],l={},r=[];function c(){if(void 0!==l.eventCollection)for(let e=0;e<l.eventCollection.length;e++)l.eventCollection[e].element.addEventListener(l.eventCollection[e].event,l[l.eventCollection[e].func])}function o(e,n,t){let l=[];for(let r=0;r<e.length;r++){function i(i){let r=e[i].split(">")[0]+">",c=e[i].split(">")[1],o=r.match(/[+*?$^(\(\).#\[\]>)]/g),u=r.split(o[0])[0],a=0,d=[],f=0,s=0,m=0,p=null,h="blend_"+String(Math.floor(1e3*Math.random())).substring(0,5)+"_elm"+String(Math.floor(2300*Math.random())).substring(0,5),v=0;for(let e=0;e<o.length;e++){function g(e){return r.split(o[e])[1].split(o[e+1])[0]}switch(o[e]){case".":v=e+1,d.push(r.split(o[e])[v].split(o[e+1])[0]);break;case"#":a=g(e);break;case"[":s=g(e);break;case"(":f=g(e)}}void 0!==c&&(m=c);let E=document.createElement(u.replace(/^\s+/,""));if(d.length>0&&d.forEach(function(e){E.classList.add(e)}),0!==a&&(E.id=a),0!==s){(s.split(", ")||s).forEach(function(e){let n=e.split("=");E.setAttribute(n[0],n[1])})}0!==m&&(E.innerHTML=m);let b=e[i].split(o[0])[0].match(/ /g);if(null===b&&(b=0),"number"!=typeof f&&-1!==f.indexOf("=")){let e=f.replace(/ /g,"");-1!==f.indexOf("&&")?(p=e.split("&&")[1].split("="),f=e.split("&&")[0]):(p=e.split("="),f=0)}let y=1;if(n.forEach(function(e,n){e.blendName===f&&0!==f&&(f=f.replace("_"+(y-1),"")+"_"+y,y++)}),l.push({blendName:f,id:a,blend_id:h,childElement:[],spacesLength:b.length||0,element:E,classes:d,sim:o,structure:e[i],eventFunc:p}),void 0!==t&&(l[i].source=t),void 0!==l[i-1]&&void 0!==l[i-1].spacesLength){l[i].spacesLength>l[i-1].spacesLength&&l[i-1].childElement.push(l[i]);for(let e=0;e<l.length;e++)l[i].spacesLength===l[e].spacesLength&&l[i].blend_id!==l[e].blend_id&&0!==l[i].spacesLength&&l[e-1].childElement.push(l[i])}l.forEach(function(t,l){0===t.spacesLength&&e.length-1===i&&n.push(t)})}"string"==typeof e[r]?i(r):console.error("Parsing error: Error parsing line")}}function u(e,n,t){!function e(i,r){let c,o=0,u=i.length;for(;o<u;o++)c=i[o],void 0!==r&&r.append(c.element),0!==c.childElement.length&&e(c.childElement,c.element),0!==i[o].spacesLength&&!0!==t||n(o,c),null!==i[o].eventFunc&&(l.eventCollection=[],l.eventCollection.push({element:i[o].element,func:i[o].eventFunc[1],event:i[o].eventFunc[0]}))}(e)}function a(e,n,t,l){let i,r=0;return(e.childElement||e).forEach(function(e,c){if(void 0===l?i=e.blendName:"id"===l?i=e.id:"blendId"===l&&(i=e.blend_id),"class"!==l)i!==n&&null!==n||(void 0!==t&&t(e),r=e);else for(let l=0;l<e.classes.length;l++)e.classes[l]===n&&(void 0!==t&&t(e),r=e);0!==e.childElement&&a(e,n,t)}),r}this.updateEvent=function(e){if("function"==typeof Event)return new Event(e);var n=document.createEvent("Event");return n.initEvent(e,!0,!0)}("Blend.update"),this.update=function(){document.dispatchEvent(e.updateEvent),c()},this.class=function(e){return new e},this.component=function(){let e=this,i=[];return void 0!==e.model&&e.model.call(l),r=e.view,void 0!==e.view&&o(r.call(l,l),i,"view"),{render:function(r){return n=document.querySelector(r),u(i,function(e){n.append(i[e].element)}),void 0!==e.supply&&o(e.supply.call(l),t),t=t.concat(i),void 0!==e.controller&&(e.controller.call(t,l),c()),void 0!==e.onEvent&&e.event.call(t),e.Source=t,t},inheritance:function(){return t},clear:function(){return t=[],e.Source=[],e.Source}}},this.watch=function(t){function c(e,n,l){let i,r,c,d=[];return a(t,l,function(e){d.push(e)}),u(d,function(t){let l=d[t].element;r=d[t].structure,c=d[t].childElement,i=l.cloneNode(!0),"append"===e?n.element.append(i):"prepend"===e?n.element.prepend(i):"create"===e&&(n.element.innerHTML=i)}),{supplement:function(e){let l=[],u=[r];for(let e=0;e<c.length;e++)u.push(c[e].structure);return o(u,l),l[0].blendName=e,l[0].element=i,i.childNodes.forEach(function(e,n){void 0!==l[0].childElement[n]&&(l[0].childElement[n].element=e)}),a(t,n.blendName,function(n){let t=0;for(let i=0;i<n.childElement.length;i++)-1!==n.childElement[i].blendName.indexOf(e)&&(l[0].blendName=e+"_"+t++);n.childElement.push(l[0])}),{deliver:function(){l[0].element.setAttribute("data-blend-name",l[0].blendName)},renameChild:function(e,n){a(l[0].childElement,e,function(t){t.blendName=n,t.structure=t.structure.replace("("+e+")","("+n+")")})},innerBefore:function(e){l[0].element.prepend(e)},innerAfter:function(e){l[0].element.append(e)},child:function(e){return{inner:function(n){a(l[0].childElement,e,function(e){e.element.innerHTML=n})},innerAfter:function(n){a(l[0].childElement,e,function(e){e.element.append(n)})},innerBefore:function(n){a(l[0].childElement,e,function(e){e.element.prepend(n)})}}},attr:{set:function(e,n){l[0].element.setAttribute(e,n)},get:function(e){return l[0].element.getAttribute(e)}},addClass:function(e){l[0].element.classList.add(e)},removeClass:function(e){l[0].element.classList.remove(e)},inner:function(e){l[0].element.innerHTML=e}}}}}function d(n,l,i){let r=null;function c(){if(void 0!==l.before&&(r=l.before.call(e.watch(t))),"string"==typeof n)a(t,n,function(e){return i(e,{before:r,index:0,target:n})});else if(Array.isArray(n))for(let e=0;e<n.length;e++)a(t,n[e],function(t){return i(t,{before:r,index:e,target:n[e]})})}document.addEventListener("Blend.update",function(){!0===l.update&&c()}),c()}function f(n,l){n.run.call(e.watch(t),l),!0===n.update&&e.update()}function s(e,n){let l=void 0;return a(t,e,function(e){l=e},n),l}return{it:function(e){let n=null;if(Array.isArray(e)){n=[];for(let l=0;l<e.length;l++)a(t,e[l],function(e){n.push(e)})}else a(t,e,function(e){n=e});return{updateState:function(){let e=[];o(r.call(l,l),e),u(e,function(e,t){function l(e){t.blendName===e.blendName&&(e.element.replaceWith(t.element),e.id=t.id,e.classes=t.classes,e.element=t.element,e.structure=t.structure)}if(Array.isArray(n))for(var i=0;i<n.length;i++)l(n[i]);else l(n)},!0)},draw:function(e){void 0===e.data&&(e.data=[0]);for(let t=0;t<e.data.length;t++){let l=[];void 0!==e.before&&e.before(e.data[t],t),o("function"==typeof e.render?e.render(e.data[t],t):e.render,l),void 0!==e.after&&e.after(e.data[t],t),void 0===e.type&&(e.type="append"),u(l,function(t){switch(e.type){case"append":n.element.append(l[t].element);break;case"prepend":n.element.prepend(l[t].element);break;case"rewrite":n.element.innerHTML=l[t].element.outerHTML}})}},rename:function(e){a(t,n,function(t){t.blendName=e,t.structure=t.structure.replace("("+n+")","("+e+")")})},value:{get:function(){return n.element.value},set:function(e){return n.element.value=e}},remove:function(){n.element.remove()},create:function(e){return c("create",n,e)},append:function(e){return c("append",n,e)},prepend:function(e){return c("prepend",n,e)},refactor:function(e){let l=[];a(t,e,function(e){l=e}),n.element.replaceWith(l.element)},childIndex:function(e){let t;for(let l=0;l<n.childElement.length;l++)n.childElement[l].blendName===e&&(t=l);return i},childLength:function(){return n.childElement.length},attr:{set:function(e,t){n.element.setAttribute(e,t)},get:function(e){return n.element.getAttribute(e)}},inner:function(e){n.element.innerHTML=e},innerAfter:function(e){n.element.append(e)},innerBefore:function(e){n.element.prepend(e)},redraw:function(e){let t=[];o(e,t),u(t,function(e){n.element.replaceWith(t[e].element)})},item:n,el:n.element}},updateStates:function(){let e=[];o(r.call(l,l),e);document.createElement("div"),n.childNodes;!function e(n,t){for(let l=0;l<n.length;l++)"view"===n[l].source&&(n[l].structure!==t[l].structure&&(n[l].element.replaceWith(t[l].element),n[l].element=t[l].element,n[l].structure=t[l].structure,n[l].classes=t[l].classes,n[l].id=t[l].id),0!==n[l].childElement&&e(n[l].childElement,t[l].childElement))}(t,e)},each:function(e){!function n(t){for(let l=0;l<t.length;l++)e(t[l],l),0!==t[l].childElement&&n(t[l].childElement)}(t)},searchId:function(e){return s(e,"id")},searchClass:function(e){return s(e,"class")},searchBlendId:function(e){return s(e,"blendId")},build:function(e){void 0===e.data&&(e.data=[0]);for(let n=0;n<e.data.length;n++){void 0!==e.before&&e.before(e.data[n],n),o("function"==typeof e.create?e.create(e.data[n],n):e.create,t),void 0!==e.after&&e.after(e.data[n],n)}},onEvent:function(e){return{click:function(n){return d(e,n,function(e,t){e.element.onclick=function(e){t.mouse=e,f(n,t)}})},keyup:function(n){return d(e,n,function(e,t){e.element.onkeyup=function(e){t.mouse=e,f(n,t)}})},change:function(n){return d(e,n,function(e,t){e.element.onchange=function(e){t.mouse=e,f(n,t)}})},keydown:function(n){return d(e,n,function(e,t){e.element.onkeydown=function(e){t.mouse=e,f(n,t)}})},mouseOver:function(n){return d(e,n,function(e,t){e.element.onmouseover=function(e){t.mouse=e,f(n,t)}})},onmouseOut:function(n){return d(e,n,function(e,t){e.element.onmouseout=function(e){t.mouse=e,f(n,t)}})}}},blendSource:t}}}const blend=new Blend;