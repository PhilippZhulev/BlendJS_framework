function Blend(){!function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}(),this.version="0.1.8";const e=this;let n,t=[],l={},o=[];function r(){if(void 0!==l.eventCollection)for(let e=0;e<l.eventCollection.length;e++)l.eventCollection[e].element.addEventListener(l.eventCollection[e].event,l[l.eventCollection[e].func])}function c(e,n){let t=[];for(let i=0;i<e.length;i++){function l(l){let i=e[l].split(">")[0]+">",o=e[l].split(">")[1],r=i.match(/[+*?$^(\(\).#\[\]>)]/g),c=i.split(r[0])[0],u=0,d=[],a=0,f=0,s=0,p=null,m="blend_"+String(Math.floor(1e3*Math.random())).substring(0,5)+"_elm"+String(Math.floor(2300*Math.random())).substring(0,5),h=0;for(let e=0;e<r.length;e++){function b(e){return i.split(r[e])[1].split(r[e+1])[0]}switch(r[e]){case".":h=e+1,d.push(i.split(r[e])[h].split(r[e+1])[0]);break;case"#":u=b(e);break;case"[":f=b(e);break;case"(":a=b(e)}}void 0!==o&&(s=o);let v=document.createElement(c.replace(/^\s+/,""));if(d.length>0&&d.forEach(function(e){v.classList.add(e)}),0!==u&&(v.id=u),0!==f){(f.split(", ")||f).forEach(function(e){let n=e.split("=");v.setAttribute(n[0],n[1])})}0!==s&&(v.innerHTML=s);let g=e[l].split(r[0])[0].match(/ /g);if(null===g&&(g=0),"number"!=typeof a&&-1!==a.indexOf("=")){let e=a.replace(/ /g,"");-1!==a.indexOf("&&")?(p=e.split("&&")[1].split("="),a=e.split("&&")[0]):(p=e.split("="),a=0)}let E=1;if(n.forEach(function(e,n){e.blendName===a&&0!==a&&(a=a.replace("_"+(E-1),"")+"_"+E,E++)}),t.push({blendName:a,id:u,blend_id:m,childElement:[],spacesLength:g.length||0,element:v,classes:d,sim:r,blendSupply:e[l],eventFunc:p}),void 0!==t[l-1]&&void 0!==t[l-1].spacesLength){t[l].spacesLength>t[l-1].spacesLength&&t[l-1].childElement.push(t[l]);for(let e=0;e<t.length;e++)t[l].spacesLength===t[e].spacesLength&&t[l].blend_id!==t[e].blend_id&&0!==t[l].spacesLength&&t[e-1].childElement.push(t[l])}t.forEach(function(t,i){0===t.spacesLength&&e.length-1===l&&n.push(t)})}"string"==typeof e[i]?l(i):console.error("Parsing error: Error parsing line")}}function u(e,n,t){!function e(i,o){let r,c=0,u=i.length;for(;c<u;c++)r=i[c],void 0!==o&&o.append(r.element),0!==r.childElement.length&&e(r.childElement,r.element),0!==i[c].spacesLength&&!0!==t||n(c,r),null!==i[c].eventFunc&&(l.eventCollection=[],l.eventCollection.push({element:i[c].element,func:i[c].eventFunc[1],event:i[c].eventFunc[0]}))}(e)}function d(e,n,t,l){let i,o=0;return(e.childElement||e).forEach(function(e,r){if(void 0===l?i=e.blendName:"id"===l?i=e.id:"blendId"===l&&(i=e.blend_id),"class"!==l)i!==n&&null!==n||(void 0!==t&&t(e),o=e);else for(let l=0;l<e.classes.length;l++)e.classes[l]===n&&(void 0!==t&&t(e),o=e);0!==e.childElement&&d(e,n,t)}),o}this.updateEvent=function(e){if("function"==typeof Event)return new Event(e);var n=document.createEvent("Event");return n.initEvent(e,!0,!0)}("Blend.update"),this.update=function(){document.dispatchEvent(e.updateEvent),r()},this.class=function(e){return new e},this.component=function(){let e=this,i=[];return void 0!==e.model&&e.model.call(l),o=e.view,void 0!==e.view&&c(o.call(l,l),i),{render:function(o){return n=document.querySelector(o),u(i,function(e){n.append(i[e].element)}),void 0!==e.supply&&c(e.supply.call(l),t),t=t.concat(i),void 0!==e.controller&&(e.controller.call(t,l),r()),void 0!==e.onEvent&&e.event.call(t),e.BlendSupply=t,t},inheritance:function(){return t},clear:function(){return t=[],e.BlendSupply=[],e.BlendSupply}}},this.watch=function(n){function t(e,t,l){let i,o,r,a=[];return d(n,l,function(e){a.push(e)}),u(a,function(n){let l=a[n].element;o=a[n].blendSupply,r=a[n].childElement,i=l.cloneNode(!0),"append"===e?t.element.append(i):"prepend"===e?t.element.prepend(i):"create"===e&&(t.element.innerHTML=i)}),{supplement:function(e){let l=[],u=[o];for(let e=0;e<r.length;e++)u.push(r[e].blendSupply);return c(u,l),l[0].blendName=e,l[0].element=i,i.childNodes.forEach(function(e,n){void 0!==l[0].childElement[n]&&(l[0].childElement[n].element=e)}),d(n,t.blendName,function(n){let t=0;for(let i=0;i<n.childElement.length;i++)-1!==n.childElement[i].blendName.indexOf(e)&&(l[0].blendName=e+"_"+t++);n.childElement.push(l[0])}),{deliver:function(){l[0].element.setAttribute("data-blend-name",l[0].blendName)},renameChild:function(e,n){d(l[0].childElement,e,function(t){t.blendName=n,t.blendSupply=t.blendSupply.replace("("+e+")","("+n+")")})},innerBefore:function(e){l[0].element.prepend(e)},innerAfter:function(e){l[0].element.append(e)},child:function(e){return{inner:function(n){d(l[0].childElement,e,function(e){e.element.innerHTML=n})},innerAfter:function(n){d(l[0].childElement,e,function(e){e.element.append(n)})},innerBefore:function(n){d(l[0].childElement,e,function(e){e.element.prepend(n)})}}},attr:{set:function(e,n){l[0].element.setAttribute(e,n)},get:function(e){return l[0].element.getAttribute(e)}},addClass:function(e){l[0].element.classList.add(e)},removeClass:function(e){l[0].element.classList.remove(e)},inner:function(e){l[0].element.innerHTML=e}}}}}function r(t,l,i){let o=null;function r(){if(void 0!==l.before&&(o=l.before.call(e.watch(n))),"string"==typeof t)d(n,t,function(e){return i(e,{before:o,index:0,target:t})});else if(Array.isArray(t))for(let e=0;e<t.length;e++)d(n,t[e],function(n){return i(n,{before:o,index:e,target:t[e]})})}document.addEventListener("Blend.update",function(){!0===l.update&&r()}),r()}function a(t,l){t.run.call(e.watch(n),l),!0===t.update&&e.update()}function f(e,t){let l=void 0;return d(n,e,function(e){l=e},t),l}return{it:function(e){let r=null;if(Array.isArray(e)){r=[];for(let t=0;t<e.length;t++)d(n,e[t],function(e){r.push(e)})}else d(n,e,function(e){r=e});return{updateState:function(){let e=[];c(o.call(l,l),e),u(e,function(e,n){function t(e){n.blendName===e.blendName&&(e.element.replaceWith(n.element),e.id=n.id,e.classes=n.classes,e.element=n.element,e.blendSupply=n.blendSupply)}if(Array.isArray(r))for(var l=0;l<r.length;l++)t(r[l]);else t(r)},!0)},draw:function(e){void 0===e.data&&(e.data=[0]);for(let n=0;n<e.data.length;n++){let t=[];void 0!==e.before&&e.before(e.data[n],n),c("function"==typeof e.render?e.render(e.data[n],n):e.render,t),void 0!==e.after&&e.after(e.data[n],n),void 0===e.type&&(e.type="append"),u(t,function(n){switch(e.type){case"append":r.element.append(t[n].element);break;case"prepend":r.element.prepend(t[n].element);break;case"rewrite":r.element.innerHTML=t[n].element.outerHTML}})}},rename:function(e){d(n,r,function(n){n.blendName=e,n.blendSupply=n.blendSupply.replace("("+r+")","("+e+")")})},value:{get:function(){return r.element.value},set:function(e){return r.element.value=e}},remove:function(){r.element.remove()},create:function(e){return t("create",r,e)},append:function(e){return t("append",r,e)},prepend:function(e){return t("prepend",r,e)},refactor:function(e){let t=[];d(n,e,function(e){t=e}),r.element.replaceWith(t.element)},childIndex:function(e){let n;for(let t=0;t<r.childElement.length;t++)r.childElement[t].blendName===e&&(n=t);return i},childLength:function(){return r.childElement.length},attr:{set:function(e,n){r.element.setAttribute(e,n)},get:function(e){return r.element.getAttribute(e)}},inner:function(e){r.element.innerHTML=e},innerAfter:function(e){r.element.append(e)},innerBefore:function(e){r.element.prepend(e)},redraw:function(e){let n=[];c(e,n),u(n,function(e){r.element.replaceWith(n[e].element)})},item:r,el:r.element}},updateStates:function(){let e=[];c(o.call(l,l),e),u(e,function(e,t){if(0!==t.blendName){let e=null;d(n,t.blendName,function(n){e=n}),t.element.innerHTML!==e.element.innerHTML&&(e.element.innerHTML=t.element.innerHTML),t.id!==e.id&&(e.id=t.id),t.classes!==e.classes&&(e.classes=t.classes),t.blendSupply!==e.blendSupply&&(e.blendSupply=t.blendSupply),t.blendName!==e.blendName&&(e.blendName=t.blendName)}},!0)},each:function(e){!function n(t){for(let l=0;l<t.length;l++)e(t[l],l),0!==t[l].childElement&&n(t[l].childElement)}(n)},searchId:function(e){return f(e,"id")},searchClass:function(e){return f(e,"class")},searchBlendId:function(e){return f(e,"blendId")},build:function(e){void 0===e.data&&(e.data=[0]);for(let t=0;t<e.data.length;t++){void 0!==e.before&&e.before(e.data[t],t),c("function"==typeof e.create?e.create(e.data[t],t):e.create,n),void 0!==e.after&&e.after(e.data[t],t)}},onEvent:function(e){return{click:function(n){return r(e,n,function(e,t){e.element.onclick=function(e){t.mouse=e,a(n,t)}})},keyup:function(n){return r(e,n,function(e,t){e.element.onkeyup=function(e){t.mouse=e,a(n,t)}})},change:function(n){return r(e,n,function(e,t){e.element.onchange=function(e){t.mouse=e,a(n,t)}})},keydown:function(n){return r(e,n,function(e,t){e.element.onkeydown=function(e){t.mouse=e,a(n,t)}})},mouseOver:function(n){return r(e,n,function(e,t){e.element.onmouseover=function(e){t.mouse=e,a(n,t)}})},onmouseOut:function(n){return r(e,n,function(e,t){e.element.onmouseout=function(e){t.mouse=e,a(n,t)}})}}},blendSupply:n}}}const blend=new Blend;